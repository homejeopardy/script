<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Line Rehearsal Tool - Eurydice Edition</title>
<style>
:root {
  --bg-color: #ffffff;
  --text-color: #000000;
  --highlight-color: #e0e0e0;
}
.dark {
  --bg-color: #121212;
  --text-color: #ffffff;
  --highlight-color: #333333;
}
body {
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: sans-serif;
  text-align: center;
  margin: 0;
  padding: 20px;
}
.line-display {
  background: var(--highlight-color);
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
  cursor: pointer;
  white-space: pre-wrap;
}
button {
  padding: 10px 20px;
  margin: 10px;
  cursor: pointer;
}
</style>
</head>
<body>

<h1>Ultimate Line Rehearsal Tool</h1>

<button onclick="resetRehearsal()">Reset Rehearsal</button>
<button onclick="toggleDarkMode()">Toggle Dark Mode</button>

<div class="line-display" onclick="showNextLine()">Click to Start</div>

<script>
// Eurydice script (shortened for this example)
const lines = [
{ character: "EURYDICE", line: "All those birds? Thank you." },
{ character: "ORPHEUS", line: "Music." },
{ character: "EURYDICE", line: "How can you think about music? You either hear it or you donâ€™t." },
{ character: "ORPHEUS", line: "Iâ€™m hearing it then." },
// Add full script here
];

let userLines = [];
let currentIndex = 0;
let showingCue = true;
let characterName = "";

// Text-to-Speech for cues
function speak(text) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.rate = 1.1;
  speechSynthesis.speak(utterance);
}

function startRehearsal() {
  characterName = prompt("Enter your character name exactly as in the script:").toUpperCase();
  userLines = lines.filter(entry => entry.character === characterName)
                   .map(entry => {
                     const cueIndex = lines.indexOf(entry);
                     return {
                       cue: cueIndex > 0 ? lines[cueIndex - 1].line : "(start)",
                       line: entry.line
                     };
                   });
  currentIndex = 0;
  showingCue = true;
  document.querySelector('.line-display').textContent = "Click to Start";
}

function showNextLine() {
  if (!userLines.length) {
    startRehearsal();
    return;
  }

  if (currentIndex >= userLines.length) {
    document.querySelector('.line-display').textContent = "ðŸŽ‰ Done!";
    return;
  }

  const display = document.querySelector('.line-display');

  if (showingCue) {
    display.textContent = userLines[currentIndex].cue;
    speak(userLines[currentIndex].cue);  // Read cue out loud
    showingCue = false;
  } else {
    display.textContent = userLines[currentIndex].line;
    showingCue = true;
    currentIndex++;
  }
}

function resetRehearsal() {
  userLines = [];
  currentIndex = 0;
  showingCue = true;
  characterName = "";
  document.querySelector('.line-display').textContent = "Click to Start";
}

function toggleDarkMode() {
  document.body.classList.toggle('dark');
}
</script>

</body>
</html>
