<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ultimate Line Rehearsal Tool</title>
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #000000;
      --highlight-color: #e0e0e0;
    }
    .dark {
      --bg-color: #121212;
      --text-color: #ffffff;
      --highlight-color: #333333;
    }
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    .line-display {
      background: var(--highlight-color);
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      cursor: pointer;
      white-space: pre-wrap;
    }
    button, select {
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>Ultimate Line Rehearsal Tool</h1>

  <label for="characterSelect">Select Your Character:</label>
  <select id="characterSelect"></select>

  <label for="voiceSelect">Select Cue Voice:</label>
  <select id="voiceSelect"></select>

  <button onclick="resetRehearsal()">Reset Rehearsal</button>
  <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
  <button onclick="pauseSpeech()">Pause</button>
  <button onclick="resumeSpeech()">Resume</button>
  <button onclick="skipCue()">Skip Cue</button>

  <div class="line-display" onclick="showNextLine()">Click to Start</div>

  <script>
    const lines = [
{ character: "cue", line: "Eurydice and Orpheus sit together, overlooking the ocean. Orpheus makes a sweeping gesture with his arm, indicating the sky." },
{ character: "EURYDICE", line: "All those birds? Thank you." },
{ character: "cue", line: "He nods. He makes another sweeping gesture indicating an invisible sea." },
{ character: "EURYDICE", line: "And - the sea! For me?" },
{ character: "cue", line: "He nods." },
{ character: "EURYDICE", line: "Wow" },
{ character: "cue", line: "He indicates the sky." },
{ character: "EURYDICE", line: "Surely not - surely not the sky and the stars too?!" },
{ character: "cue", line: "He nods." },
{ character: "EURYDICE", line: "Thatâ€™s very generous." },
{ character: "cue", line: "He nods." },
{ character: "EURYDICE", line: "Perhaps too generous?" },
{ character: "cue", line: "Orpheus shakes his head no." },
{ character: "EURYDICE", line: "Thank you. Now - walk over there." },
{ character: "cue", line: "Orpheus walks in a straight line on an unseen boardwalk." },
{ character: "EURYDICE", line: "Donâ€™t look at me.â€ },
{ character: "cue", line: "He turns his face away from hers and walks.â€ },
{ character: "EURYDICE", line: "Now - stop.â€ },
{ character: "cue", line: "He stops and turns. She runs and hugs him.â€ },
{ character: "EURYDICE", line: "What are you thinking about?â€ },
{ character: "ORPHEUS", line: â€œMusic.â€ },
{ character: "EURYDICE", line: â€œHow can you think about music? You either hear it or you donâ€™t.â€ },
{ character: "ORPHEUS", line: â€œIâ€™m hearing it then.â€ },
{ character: "EURYDICE", line: â€œOh. I read a book today.â€ },
{ character: "ORPHEUS", line: â€œDid you?â€ },
{ character: "EURYDICE", line: â€œYes. It was very interesting.â€ },
{ character: "ORPHEUS", line: â€œThatâ€™s good.â€ },
{ character: "EURYDICE", line: â€œDonâ€™t you want to know what it was about?â€ },
{ character: "ORPHEUS", line: â€œOf course.â€ },
{ character: "EURYDICE", line: â€œThere were - stories - about peopleâ€™s lives - how some come out well - and others come out badly.â€ },
{ character: "ORPHEUS", line: â€œDo you love the book?â€ },
{ character: "EURYDICE", line: â€œYes - I think so.â€ },
{ character: "ORPHEUS", line: â€œWhy?â€ },
{ character: "EURYDICE", line: â€œIt can be interesting to see if other people - like dead people who wrote books - agree or disagree with what you think.â€ },
{ character: "ORPHEUS", line: â€œWhy?â€ },
{ character: "EURYDICE", line: â€œBecause it makes you - a larger part of the human community. It had very interesting arguments.â€ },
{ character: "ORPHEUS", line: â€œOh. And arguments that are interesting are good arguments?â€ },
{ character: "EURYDICE", line: â€œWell - yes.â€ },
{ character: "ORPHEUS", line: â€œI didnâ€™t know an argument should be interesting. I thought it should be right or wrong.â€ },
{ character: "EURYDICE", line: â€œWell, these particular arguments were very interesting.â€ },
{ character: "ORPHEUS", line: â€œMaybe you should make up your own thoughts. Instead of reading them in a book.â€ },
{ character: "EURYDICE", line: â€œI do. I do think up my own thoughts.â€
{ character: "ORPHEUS", line: â€œI know you do. I love how you love books. Donâ€™t be mad. I made up a song for you today.â€ },
{ character: "EURYDICE", line: â€œWill you sing it for me?â€ },
{ character: â€œcueâ€, line: â€œHe nods. He hums a bar of melody.â€ },
{ character: "ORPHEUS", line: â€œYou have it?â€ },
{ character: "EURYDICE", line: â€œYes. I think so.â€ },
{ character: "ORPHEUS", line: â€œLetâ€™s hear it. I love you.â€ },
{ character: "EURYDICE", line: â€œI love you, too.â€ },
{ character: "ORPHEUS", line: â€œHow will you remember?â€ },
{ character: "EURYDICE", line: â€œThat I love you?â€ },
{ character: "ORPHEUS", line: â€œYes.â€ },
{ character: "EURYDICE", line: â€œThatâ€™s easy. I canâ€™t help it.â€ },
{ character: "ORPHEUS", line: â€œYou never know. Iâ€™d better tie a string around your finger to remind you.â€ },
{ character: "EURYDICE", line: â€œIs there string at the ocean?â€ },
{ character: "ORPHEUS", line: â€œI always have string. In case I come upon a broken instrument. May our lives be full of music!â€ },
{ character: "cue", line: "Sounds of a wedding party are heard offstage. Eurydice enters wearing a flowery veil. She fills a glass of water at a water pump. The MAN creeps in, followed by LOUD STONE, BIG STONE, and LITTLE STONE.â€ },
{ character: "EURYDICE", line: â€œI hate parties. And a wedding party is the biggest party of all. I always thought there would be more interesting people at my wedding. Who are you?â€ },
{ character: "MAN", line: "Yes...yes yes yse...no one. I just have something to tell you. I have a letter. Addressed to Eurydice - thatâ€™s you - from your father.â€ },
{ character: "EURYDICE", line: â€œThatâ€™s not possible.â€ },
{ character: "MAN", line: "He wrote down some thoughts - for your wedding day.â€ },
{ character: "EURYDICE", line: â€œLet me see.â€ },
{ character: "ORPHEUS", line: â€œEurydice!?â€ },
{ character: "cue", line: "The underworld. There are strange water noises. The movement of the underworld is marked by the entrance of the stones, singing and dancing as stones might.â€ },
{ character: "THE STONES", line: â€œWe are a chorus of stones.â€ },
{ character: "LITTLE STONE", line: "Iâ€™m a little stone.â€ },
{ character: "BIG STONE", line: "Iâ€™m a big stone.â€ },
{ character: "LOUD STONE", line: "Iâ€™m a loud stone.â€ },
{ character: "THE STONES", line: â€œWe are all three stones.â€ },
{ character: "LITTLE STONE", line: "We live with the dead people in the land of the dead.â€ },
{ character: "BIG STONE", line: "Eurydice was a great musician. Orpheus was his wife.â€ },
{ character: "LOUD STONE", line: "Orpheus was a great musician. Eurydice was his wife. She died.â€ },
{ character: "LITTLE STONE", line: "Then he played the saddest music. Even we -â€ },
{ character: "THE STONES", line: â€œThe stones -â€ },
{ character: "LITTLE STONE", line: "Cried when we heard it.â€ },
{ character: â€œcueâ€, line: â€œEurydice enters in a coat, carrying an umbrella and a suitcase.â€ },
{ character: LITTLE STONEâ€, line: Oh, look, she is coming into the land of the dead now.â€ },
{ character: "BIG STONE", line: "Oh!â€ },
{ character: "LOUD STONE", line: "Oh!â€ },
{ character: "LITTLE STONE", line: "Oh!â€ },
{ character: "cue", line: "Eurydice looks around the room, confused. She tries to speak but doesnâ€™t have any words to say. She is frustrated.â€ },
{ character: "THE STONES", line: â€œEurydice wants to speak to you. But she canâ€™t speak your language anymore. She talks in the language of dead people now.â€ },
{ character: "LOUD STONE", line: "Itâ€™s a very quiet language.â€ },
{ character: "LITTLE STONE", line: "Like if the pores in your face opened up and talked.â€ },
{ character: "BIG STONE", line: "Like potatoes sleeping in the dirt.â€ },
{ character: â€œcueâ€, line: â€œLittle Stone and Loud Stone look at Big Stone as though that were a dumb thing to say.â€ },
{ character: "LITTLE STONE", line: "Pretend that you understand her or sheâ€™ll be embarrassed.â€ },
{ character: "BIG STONE", line: "Yes - pretend for a moment that you understand the language of stones.â€ },
{ character: "LOUD STONE", line: "Listen to her the way you would listen to your own daughter if she died too young and tried to speak to you across long distances.â€ },
{ character: â€œcueâ€, line: â€œEurydice shakes out her umbrella. She speaks to the audience.â€ },
{ character: "EURYDICE", line: â€œThere was a roar, and a coldness - I think my husband was with me. What was my husbandâ€™s name?â€ },
{ character: â€œ cueâ€, line: â€œEurydice turns to the stones.â€ },
{ character: "EURYDICE", line: "My husbandâ€™s name? Do you know it?â€ },
{ character: "cue", line: "The stones shrug their shoulders.â€ },
{ character: "EURYDICE", line: "How strange. I donâ€™t remember. When I got through the cold they made me swim in a river and I forgot his name. I forgot all the names. I know his name starts with my mouth shaped like a ball of twine - Oar - oar. I forget. They took me in a tiny boat. I only just fit inside. I looked at the oars and I wanted to cry.â€ },
{ character: "cue", line: "She tries to cry, but finds that she canâ€™t.â€ },
{ character: "EURYDICE", line: "What happiness it would be to cry.â€ },
{ character: "cue", line: "A train whistle sounds. Eurydice looks for it.â€ },
{ character: "EURYDICE", line: "A train!â€ },
{ character: "LITTLE STONE", line: "The station is like a train but there is no train.â€ },
{ character: "BIG STONE", line: "The train has wheels that are not wheels.â€ },
{ character: "LOUD STONE", line: "There is the opposite of a wheel and the opposite of smoke and the opposite of a train.â€ },
{ character: "EURYDICE", line: â€œOh! Iâ€™m waiting for someone to meet me, I think.â€ },
{ character: "cue", line: "Eurydiceâ€™s FATHER approaches and takes her baggage.â€ },
{ character: "FATHER", line: "Eurydice.â€ },
{ character: "EURYDICE", line: â€œTo the stones At last, a porter to meet me! To the Father Do you happen to know where the bank is? I need money. I just arrived. I didnâ€™t bring travelerâ€™s checks because I left in such a hurry. They didnâ€™t even let me pack my suitcase. Thereâ€™s nothing in it! Thatâ€™s funny, right?â€
{ character: "FATHER", line: "Eurydice!â€ },
{ character: "EURYDICE", line: â€œWhat is that language youâ€™re speaking? It gives me tingles. Say it again.â€ },
{ character: "FATHER", line: "Eurydice!â€ },
{ character: "EURYDICE", line: Oooh - itâ€™s like a fruit! Again!â€ },
{ character: "FATHER", line: "Eurydice - Iâ€™m your father.â€ },
{ character: "EURYDICE", line: â€œImitating Eurydice - Iâ€™m your father! How funny! You remind me of something but I canâ€™t understand a word youâ€™re saying. Say it again!â€ },
{ character: "FATHER", line: â€œYour father.â€ },
{ character: "THE STONES", line: â€œTo the Father Shut up, shut up! She doesnâ€™t understand you. You have to speak in the language of stones.â€ },
{ character: "EURYDICE", line: â€œI need a reservation. For the fancy hotel.â€ },
{ character: "FATHER", line: "When you were alive, I was your father.â€ },
{ character: "THE STONES", line: â€œFather is not a word that dead people understand.â€ },
{ character: "LOUD STONE", line: "He is what we call subversive.â€ },
{ character: "FATHER", line: "When you were alive, I was your tree.â€ },
{ character: "EURYDICE", line: â€œMy tree! Yes, the tall one in the backyard! I used to sit all day in its shade. Ah - there - shade!â€ },
{ character: "LITTLE STONE", line: "There is a problem here.â€ },
{ character: "EURYDICE", line: â€œIs there any entertainment at the hotel?â€ },
{ character: "FATHER", line: "I named you Eurydice. Your mother named all the other children. But Eurydice I chose for you.â€ },
{ character: "BIG STONE", line: "Be careful, sir.â€ },
{ character: "FATHER", line: "Eurydice. I wanted to remember your name. I asked the Stones. They said: forget the names - the names make you remember.â€ },
{ character: "LOUD STONE", line: "We told you how it works!â€ },
{ character: "BIG STONE", line: "To Eurydice Donâ€™t listen to him!â€ }
{ character: "EURYDICE", line: â€œI feel suddenly hungry! I would like a continental breakfast, please. Maybe some rolls and butter. Oh - and jam. Please take my suitcase to my room, if you would.â€ },
{ character: "FATHER", line: "Iâ€™m sorry, miss, but there are no rooms here.â€ },
{ character: "EURYDICE", line: â€œWhat? No rooms? Where do people sleep?â€ },
{ character: "FATHER", line: "People donâ€™t sleep here.â€ },
{ character: "EURYDICE", line: â€œI have to say Iâ€™m very disappointed. Itâ€™s been such a tiring day. Iâ€™ve been traveling all day - first on a river, then on an elevator that rained, then on a train...I thought someone would meet me at the stationâ€¦â€ },
{ character: "cue", line: "Eurydice is on the verge of tearsâ€ },
{ character: "THE STONES", line: â€œDonâ€™t cry! Donâ€™t cry!â€ },
{ character: "EURYDICE", line: â€œI donâ€™t know where I am and there are all these stones and I hate them! Theyâ€™re horrible! I want a bath! I thought someone would meet me at the station!â€ },
{ character: "FATHER", line: "Donâ€™t be sad. Iâ€™ll take your luggage to your room.â€ },
{ character: "THE STONES", line: â€œTHERE ARE NO ROOMS!â€ },
{ character: "cue", line: "Orpheus hums a sad song and writes a letter. Then he reads it aloud.â€ },
{ character: "ORPHEUS", line: â€œDear Eurydice, I love you. Iâ€™m going to find you. I play the saddest music now that youâ€™re gone. You know I hate writing letters. Iâ€™ll give this letter to a worm. I hope he finds you. Love, Orpheusâ€ },
{ character: "cue", line: "Eurydice is alone. Father enters with the letter.â€ },
{ character: "FATHER", line: "There is a letter for you, miss.â€ },
{ character: "EURYDICE", line: â€œA letter?â€ },
{ character: "FATHER", line: "A letter.â€ },
{ character: "cue", line: "He hands her the letter.â€ },
{ character: "FATHER", line: "Itâ€™s addressed to you.â€ },
{ character: "EURYDICE", line: â€œThereâ€™s dirt on it.â€ },
{ character: "cue", line: "She wipes off the dirt. She opens it and looks at is. She does not know how to read it. She puts it on the ground, takes off her shoes, stands on the letter, and shuts her eyes.â€ },
{ character: "FATHER", line: "Miss.â€ },
{ character: "EURYDICE", line: â€œWhat is it?â€ },
{ character: "FATHER", line: "Would you like me to read you the letter?â€ },
{ character: "EURYDICE", line: â€œRead me the letter?â€ },
{ character: "FATHER", line: "You canâ€™t do it with your feet.â€ },
{ character: "cue", line: "Father guides her off the letter, picks it up and begins to read.â€ },
{ character: "FATHER", line: "Itâ€™s addressed to Eurydice. Thatâ€™s you.â€ },
{ character: "EURYDICE", line: â€œThatâ€™s you.â€ },
{ character: "FATHER", line: "You. It says: I love you.â€ },
{ character: "EURYDICE", line: â€œI love you?â€ },
{ character: "FATHER", line: "Itâ€™s like your tree.â€ },
{ character: "EURYDICE", line: â€œTall? Green?â€ },
{ character: "FATHER", line: "Itâ€™s like sitting in the shade.â€ },
{ character: "EURYDICE", line: â€œOh.â€ },
{ character: "FATHER", line: "Reading Iâ€™m going to find you. I play the saddest music -â€ },
{ character: "EURYDICE", line: â€œMusic?â€ },
{ character: "cue", line: "He whistles a note.â€ },
{ character: "FATHER", line: "Itâ€™s like that.â€ },
{ character: "cue", line: "She smiles.â€ },
{ character: "EURYDICE", line: â€œGo on.â€ },
{ character: "FATHER", line: "Reading You know I hate writing letters. Iâ€™ll give this letter to a worm. I hope he finds you. Love, Orpheusâ€ },
{ character: "EURYDICE", line: â€œOrpheus?â€ },
{ character: "FATHER", line: "Orpheusâ€ },
{ character: "EURYDICE", line: â€œThat word! Itâ€™s like - I canâ€™t breathe! Orpheus.â€ },
{ character: "cue", line: "Father is teaching Eurydice a song and dance.â€ },
{ character: "THE STONES", line: â€œSTOP SINGING!â€ },
{ character: "cue", line: â€œCHILD (Lord of the Underworld) enters on some sort of scooter to the sound of a heavy metal band.â€ },
{ character: "CHILD", line: "Knock, Knock.â€ },
{ character: "EURYDICE", line: â€œWhoâ€™s there?â€ },
{ character: "CHILD", line: "I am Lord of the Underworld.â€ },
{ character: "EURYDICE", line: â€œVery funny.â€ },
{ character: "CHILD", line: "I am.â€ },
{ character: "EURYDICE", line: â€œProve it.â€ },
{ character: "CHILD", line: "I can do chin-ups inside your bones. Close your eyes.â€ },
{ character: "EURYDICE", line: â€œOw.â€ },
{ character: "CHILD", line: "See?â€ },
{ character: "EURYDICE", line: â€œWhat do you want?â€ },
{ character: "CHILD", line: "Youâ€™re pretty.â€ },
{ character: "EURYDICE", line: â€œIâ€™m dead.â€ },
{ character: "CHILD", line: "Youâ€™re pretty.â€ },
{ character: "EURYDICE", line: â€œYouâ€™re little.â€ },
{ character: "CHILD", line: "I grow downward. Like a turnip.â€ },
{ character: "EURYDICE", line: â€œWhat do you want?â€ },
{ character: "CHILD", line: "I wanted to see if you were comfortable.â€ },
{ character: "EURYDICE", line: â€œComfortable?â€ },
{ character: "CHILD", line: "Youâ€™re not itchy?â€ },
{ character: "EURYDICE", line: â€œNo.â€ },
{ character: "CHILD", line: "Thatâ€™s good.â€ },
{ character: "cue", line: "Pointing at the suitcaseâ€ },
{ character: "CHILD", line: "What is that?â€ },
{ character: "EURYDICE", line: â€œThe luggage for my stay. The porter brought it to my room for me.â€ },
{ character: "THE STONES", line: â€œRooms are not allowed!â€ },
{ character: "CHILD", line: "The porter?â€ },
{ character: "EURYDICE", line: â€œMy father?â€ },
{ character: "CHILD", line: "Fathers are not allowed! Where is he?â€ },
{ character: "EURYDICE", line: â€œHeâ€™s at work.â€ },
{ character: "CHILD", line: "Weâ€™ll have to dip you in the river again and make sure youâ€™re good and dunked.â€ },
{ character: "THE STONES", line: â€œWe will!â€ },
{ character: "cue", line: "Child exits the way he came, laughing.â€ },
{ character: "THE STONES", line: "Good-bye! },
{ character: "cue", line: "Orpheus sits alone at the gates of hell. He sings the same melody from the first scene. The Stones watch him, saddened. The Child enters.â€ },
{ character: "CHILD", line: "Who are you?â€ },
{ character: "ORPHEUS", line: â€œI am Orpheus.â€ },
{ character: "CHILD", line: "I am Lord of the Underworld.â€ },
{ character: "ORPHEUS", line: â€œBut youâ€™re so young!â€ },
{ character: "CHILD", line: "Donâ€™t be rude.â€ },
{ character: "ORPHEUS", line: â€œSorry. Did you like my music?â€ },
{ character: "CHILD", line: "No. I prefer happy music with a nice beat.â€ },
{ character: "ORPHEUS", line: â€œOh.â€ },
{ character: "CHILD", line: "Youâ€™ve come for Eurydice.â€ },
{ character: "ORPHEUS", line: â€œYes!â€ },
{ character: "CHILD", line: "And you thought singing would get you through the gates of hell.â€ },
{ character: "ORPHEUS", line: â€œWhat do I have to do?â€ },
{ character: "CHILD", line: "Youâ€™ll have to do more than sing.â€ },
{ character: "ORPHEUS", line: â€œIâ€™m not sure what you mean, sir.â€ },
{ character: "CHILD", line: "Start walking home. Your wife just might be on the road behind you. We make it real nice here. So people want to stick around. As you walk, keep your eyes facing front. If you look back at her - poof! Sheâ€™s gone.â€ },
{ character: "ORPHEUS", line: â€œI canâ€™t look at her?â€ },
{ character: "CHILD", line: "No.â€ },
{ character: "ORPHEUS", line: â€œWhy?â€ },
{ character: "CHILD", line: "Because.â€ },
{ character: "ORPHEUS", line: â€œBecause?â€ },
{ character: "CHILD", line: "Because. Do you understand me?â€ },
{ character: "ORPHEUS", line: â€œI look straight ahead. Thatâ€™s all?â€ },
{ character: "CHILD", line: "Yes.â€ },
{ character: "ORPHEUS", line: â€œThatâ€™s easy.â€ },
{ character: "CHILD", line: "Good.â€ },
{ character: "cue", line: "Orpheus hums as he begins to slowly walk down the aisle with intense focus. Eurydice and Father enter.â€ },
{ character: "EURYDICE", line: â€œI hear him at the gates! Thatâ€™s his music! Heâ€™s come to save me!â€ },
{ character: "FATHER", line: "Do you want to go with him?â€ },
{ character: "EURYDICE", line: â€œYes of course! Oh - youâ€™ll be lonely, wonâ€™t you?â€ },
{ character: "FATHER", line: "No, no.â€ },
{ character: "EURYDICE", line: â€œAre you sure?â€ },
{ character: "FATHER", line: "Iâ€™ll take you to him.â€ },
{ character: "cue", line: "He takes her arm and walk to the top of the path where Orpheus walks.â€ },
{ character: "FATHER", line: "Is that him?â€ },
{ character: "EURYDICE", line: â€œYes - I think so -â€ },
{ character: "FATHER", line: "Thereâ€™s one thing you need to know. If he turns around and sees you, youâ€™ll die a second death. Those are the rules. So step quickly. And donâ€™t cry out.â€ },
{ character: "EURYDICE", line: â€œI wonâ€™t.â€ },
{ character: "FATHER", line: "Good-bye.â€ },
{ character: "cue", line: "They embrace.â€ },
{ character: "EURYDICE", line: â€œIâ€™ll look for a tree.â€ },
{ character: "FATHER", line: "Iâ€™ll write you letters. Good-bye, Eurydice.â€ },
{ character: "EURYDICE", line: â€œGood-bye.â€ },
{ character: "cue", line: "She watches Father exit.â€ },
{ character: "LOUD STONE", line: "Face forward!â€ },
{ character: "BIG STONE", line: "Keep walking.â€ },
{ character: "EURYDICE", line: â€œIâ€™m afraid!â€ },
{ character: "cue", line: "She turns to run back to her father.â€ },
{ character: "THE STONES", line: â€œTurn around!â€ },
{ character: "LITTLE STONE", line: "Orpheus came all the way here to find you.â€ },
{ character: "LOUD STONE", line: "He played the saddest music.â€ },
{ character: "BIG STONE", line: "Even we -â€ },
{ character: "THE STONES", line: â€œThe stones -â€ },
{ character: "LITTLE STONE", line: "Cried when we heard it.â€ },
{ character: "cue", line: "Eurydice turns back to see Orpheus.â€ },
{ character: "EURYDICE", line: â€œThatâ€™s Orpheus?â€ },
{ character: "THE STONES", line: â€œYes, thatâ€™s him!â€ },
{ character: "EURYDICE", line: â€œWhereâ€™s his music?â€ },
{ character: "THE STONES", line: â€œItâ€™s in your head.â€ },
{ character: "cue", line: "She begins to follow him. She goes faster, catching up to him and stops.â€ },
{ character: "EURYDICE", line: â€œOrpheus?â€ },
{ character: "cue", line: "He stops and turns toward her, startled. The Stones gasp.â€ },
{ character: "ORPHEUS", line: â€œYou startled me.â€ },
{ character: "EURYDICE", line: â€œIâ€™m sorry.â€ },
{ character: "ORPHEUS", line: â€œWhy?â€ },
{ character: "EURYDICE", line: â€œI donâ€™t know.â€ },
{ character: "cue", line: "She begins to back away from him.â€ },
{ character: "ORPHEUS", line: â€œEurydice. Weâ€™ve known each other for centuries. Remember when you wanted your name in a song so I put your name in a song - When I played my music at the gates of hell I was singing your name over and over and over again. Eurydice.â€ },
{ character: "cue", line: "He quiets. He watches her go.â€ },
];

    let userLines = [];
    let currentIndex = 0;
    let showingCue = true;
    let characterName = "";
    let selectedVoice = null;

    const characterSelect = document.getElementById('characterSelect');
    const voiceSelect = document.getElementById('voiceSelect');

    function populateCharacterList() {
      const characters = [...new Set(lines.map(line => line.character))];
      characters.forEach(char => {
        const option = document.createElement('option');
        option.value = char;
        option.textContent = char;
        characterSelect.appendChild(option);
      });
    }

    function populateVoiceList() {
      const voices = speechSynthesis.getVoices();
      voiceSelect.innerHTML = '';
      voices.forEach(voice => {
        const option = document.createElement('option');
        option.value = voice.name;
        option.textContent = `${voice.name} (${voice.lang})`;
        voiceSelect.appendChild(option);
      });
    }

    speechSynthesis.onvoiceschanged = populateVoiceList;

    function startRehearsal() {
      characterName = characterSelect.value;
      selectedVoice = speechSynthesis.getVoices().find(voice => voice.name === voiceSelect.value);

      userLines = lines
        .map((entry, index) => ({ ...entry, index }))
        .filter(entry => entry.character === characterName)
        .map(entry => {
          const cueIndex = entry.index > 0 ? entry.index - 1 : null;
          return {
            cue: cueIndex !== null ? lines[cueIndex].line : "(start)",
            line: entry.line
          };
        });

      currentIndex = 0;
      showingCue = true;
      document.querySelector('.line-display').textContent = "Click to Start";
    }

    function speak(text) {
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
      }
      const utterance = new SpeechSynthesisUtterance(text);
      if (selectedVoice) {
        utterance.voice = selectedVoice;
      }
      utterance.rate = 1.1;
      speechSynthesis.speak(utterance);
    }

    function showNextLine() {
      if (!userLines.length) {
        startRehearsal();
        return;
      }

      if (currentIndex >= userLines.length) {
        document.querySelector('.line-display').textContent = "ðŸŽ‰ Done!";
        return;
      }

      const display = document.querySelector('.line-display');

      if (showingCue) {
        display.textContent = userLines[currentIndex].cue;
        speak(userLines[currentIndex].cue);
        showingCue = false;
      } else {
        display.textContent = userLines[currentIndex].line;
        showingCue = true;
        currentIndex++;
      }
    }

    function resetRehearsal() {
      userLines = [];
      currentIndex = 0;
      showingCue = true;
      characterName = "";
      document.querySelector('.line-display').textContent = "Click to Start";
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }

    function pauseSpeech() {
      if (speechSynthesis.speaking && !speechSynthesis.paused) {
        speechSynthesis.pause();
      }
    }

    function resumeSpeech() {
      if (speechSynthesis.paused) {
        speechSynthesis.resume();
      }
    }

    function skipCue() {
      if (!userLines.length) return;

      if (!showingCue) {
        // Skip to next cue
        currentIndex++;
        if (currentIndex >= userLines.length) {
          document.querySelector('.line-display').textContent = "ðŸŽ‰ Done!";
          return;
        }
      }
      showNextLine();
    }

    // Initialize character list on page load
    window.onload = () => {
      populateCharacterList();
      populateVoiceList();
    };
  </script>

</body>
</html>
